images:
- location: "https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-genericcloud-amd64.qcow2"
  arch: "x86_64"
- location: "https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-genericcloud-arm64.qcow2"
  arch: "aarch64"

mounts:
- location: "~"
  writable: true

containerd:
  system: false
  user: false

provision:
- mode: system
  script: |
    #!/bin/bash
    set -eux -o pipefail
    export DEBIAN_FRONTEND=noninteractive

    # Basic system setup
    apt update -y
    apt upgrade -y
    apt install -y curl wget sudo ca-certificates lsb-release gnupg vim git

probes: []

hostResolver: {}

portForwards:
- hostPort: 8080
  guestPort: 80
- hostPort: 2525
  guestPort: 25

message: |
  Debian 12 with FreePBX 17 is ready.
  Default user: limabean
  To enter the VM:
  ------
  limactl shell {{.Name}}
  ------
  FreePBX web interface is available on host port 8080.

